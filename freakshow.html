<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LW</title>
    <link rel="icon" href="./assets/lw.png">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="mediaqueries.css">
</head>
<body>
    <nav id="desktop-nav">
        <img 
            src="./assets/lw.png" 
            alt="Luc Walz logo"
            class="logo"
        >
        <div>
            <ul class="nav-links">
                <li><a href="index.html#profile">PROFILE</a></li>
                <li><a href="index.html#projects">PROJECTS</a></li>
                <li><a href="index.html#experience">EXPERIENCE</a></li>
                <li><a href="index.html#about">ABOUT</a></li>
                <li><a href="index.html#contact">CONTACT</a></li>
            </ul>
        </div>
    </nav>
    <nav id="hamburger-nav">
        <img 
            src="./assets/lw.png" 
            alt="Luc Walz logo"
            class="logo"
        >
        <div class="hamburger-menu">
            <div class="hamburger-icon" onclick="toggleMenu()">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <div class="menu-links">
                <ul>
                    <!-- <li><a href="blog.html" onclick="toggleMenu()">BLOG</a></li> -->
                    <li><a href="index.html#profile" onclick="toggleMenu()">PROFILE</a></li>
                    <li><a href="index.html#projects" onclick="toggleMenu()">PROJECTS</a></li>
                    <li><a href="index.html#experience" onclick="toggleMenu()">EXPERIENCE</a></li>
                    <li><a href="index.html#about" onclick="toggleMenu()">ABOUT</a></li>
                    <li><a href="index.html#contact" onclick="toggleMenu()">CONTACT</a></li>
                </ul>
            </div>
        </div>
    </nav>
    <section id="freakshow">
        <div class="section__text">
            <h1 class="title" style="color: #c0fdfb;">FREAKSHOW</h1>
            <p class="section__text__p2">
                OVERVIEW
            </p>
        </div>
        <div class="freak-container">
            <img 
                src="./assets/freakshow-banner.png" 
                alt="Freakshow"
                class="freak-shot"
            >
            <!-- <video style="max-width: 75vw; border-radius: 1.5rem;" autoplay controls loop muted>
                <source src="assets/Freakprototrailer.mp4#t=7,60" type="video/mp4">
                Your browser does not support the video tag.
            </video> -->
        </div>
        <div class="section__text">
            <br>
            <br>
            <p class="section__text__p2">
                FREAKSHOW IS A 3D, FIRST-PERSON, MULTIPLAYER HORROR GAME THAT FORCES UNFORTUNATE CONTESTANTS INTO A DEADLY GAME SHOW, ALL VIEWED LIVE BY A HANDS-ON AUDIENCE!
            </p>
            <p class="section__text__p1">
                FREAKSHOW WAS MADE BY A TEAM OF 17 OVER A 15-WEEK COURSE AT MICHIGAN STATE UNIVERSITY.
            </p>
        </div>
        <div class="text-container">
            
        </div>
    </section>
    <section id="role">
        <div class="section__text">
            <h1 class="title" style="color:#c0fdfb;">ROLE</h1>
        </div>
        <div class="section-container">
            <div class="freak-details-container">
                <div class="freak-containers">
                    <div class="freak-container">
                        <h1 class="title">NETWORK PROGRAMMER</h1>
                        <div class="freak-list">
                            <div>
                                <p class="section__text__p2" align="center">
                                    THE AUDIENCE SYSTEM
                                </p>
                                <h3 align="left"> &ensp; My main task in Freakshow was to create a functioning audience system, inspired by similar systems seen in Jackbox Games.</h3>
                                <h3 align="left"> &ensp; Originally, Freakshow was planned to support integration with Twitch.tv, where a streamer could allow their viewers to interact with their game. While this feature is still planned, we struggled to implement a playable version for testing during development. To address this, I was tasked with creating a system we could iterate on in the meantime.</h3>
                                <h3 align="left"> &ensp; Thus, the Audience System was born. Initially, I designed it to play through a WebGL build in-browser. However, we ultimately pivoted to include the Audience System in the desktop application, allowing support for more features.</h3>
                            </div>
                            <img 
                                src="./assets/freakshow-lobby.png" 
                                alt="Audience Sound Shenanigan"
                                class="freak-pic"
                            >
                        </div>
                        <div class="freak-list">
                            <img 
                                src="./assets/freakshow-join.png" 
                                alt="Audience Sound Shenanigan"
                                class="freak-pic"
                            >
                            <div>
                                <p class="section__text__p2" align="center">
                                    LOBBIES
                                </p>
                                <h3 align="left"> &ensp; At its core, the game utilizes a lobby system. Here, contestants wait to build an audience. The contestant's room is assigned a 'Join Code', and through Unity's Netcode for GameObjects, Relay, and Transport packages, audience members get their ticket to the Freakshow.</h3>
                                <h3 align="left"> &ensp; Once ready, the contestant can start the game. This pulls the contestant and all connected audience members through the loading process and into the Freakshow. </h3>
                            </div>
                        </div>
                        <div class="freak-list">
                            <img 
                                src="./assets/freakshow-waiting.png" 
                                alt="Audience Sound Shenanigan"
                                class="freak-pic"
                            >
                            <img 
                                src="./assets/freakshow-loading.png" 
                                alt="Audience Sound Shenanigan"
                                class="freak-pic"
                            >
                        </div>
                        <div class="freak-list">
                            <div>
                                <p class="section__text__p2" align="center">
                                    AUDIENCE METERS
                                </p>
                                <h3 align="left"> &ensp; Now, members of the audience are presented with my largest creation. They are each given a live map of Freakshow's grounds, allowing them to see the positions of the contestant and nearby monsters, marked as blue and red dots, respectively.</h3>
                                <h3 align="left"> &ensp; The audience can interact with the contestant's game through the 'Shenanigan Meter'. Each member has their own meter and point pool, which they can spend on any of three increasingly expensive interactions. For every point spent, audience members contribute to a collective 'Monster Meter'. At each milestone, a tougher monster spawns, increasing the difficulty for the contestant.
                                </h3>
                            </div>
                            <img 
                                src="./assets/audience-soundscroll.png" 
                                alt="Audience Sound Shenanigan"
                                class="freak-pic"
                            >
                        </div>
                        <div class="freak-list">
                            <img 
                                src="./assets/audience-surrounded.png" 
                                alt="Audience Sound Shenanigan"
                                class="freak-pic"
                            >
                            <div>
                                <p class="section__text__p2" align="center">
                                    SHENANIGANS
                                </p>
                                <h3 align="left"> &ensp; Audience members have these shenanigans at their disposal: </h3>
                                <h3 align="left">- SOUND: Plays a selected sound over the building's speakers for the contestant to hear, laughing at their misfortune.</h3>
                                <h3 align="left">- LIGHT: Disables the contestant's flashlight for a time, leaving them in darkness for dangers to creep up.</h3>
                                <h3 align="left">- TRAP: Allows the audience member to place a beartrap in a viable location by simply clicking on the live map. These traps are marked with a red 'X' on the map after placement and will temporarily lock the contestant down if hit, potentially setting them up for capture.</h3>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section id="role">
        <div class="section__text">
            <h1 class="title" style="color:#c0fdfb;">UNDER THE HOOD</h1>
        </div>
        <div class="section-container">
            <div class="freak-details-container">
                <div class="freak-containers">
                    <div class="freak-container">
                        <h1 class="title">HOW DOES IT ALL WORK?</h1>
                        <div class="freak-list">
                            <div>
                                <p class="section__text__p2" align="center">
                                    LOBBIES & LOADING SCENES
                                </p>
                                <h3 align="left"> &ensp; Since I was behind the networking for Freakshow, I also had to handle the general game loop. It's necessary to keep the host and all connected clients at the same stage of gameplay.</h3>
                                <h3 align="left"> &ensp; When a contestant goes to host a lobby, the HostButtonPress() function is called. This creates a room through Unity's Relay service and generates a 'Join Code' to secure it. Whenever an audience member submits the same code, the JoinButtonPress() function is run. This confirms their connection and updates their UI accordingly. Now, any progression from the contestant will show to all connected clients. </h3>
                                <h3 align="left"> &ensp; The next steps after this involve loading new scenes. This was one of the biggest challenges I faced in Freakshow's networking development. The host and all clients must remain in the same active scene at all times to retain their connection. I couldn't just swap them around carelessly without risking a loss of connection or, worse, Unity crashing. My original formula for this, our web-based audience testing, was not cooperating with me.</h3>
                                <h3 align="left"> &ensp; After many attempts to patch the issue, and one complete system overhaul, I arrived at a working solution. Making use of Unity's scene events and keeping track of any loaded scene, the new system additively loads a new scene for the host and all clients. That scene is then set as the new active scene, leaving the MainMenu scene alone for later. When necessary, I go through the dance again, swapping active scenes before unloading and loading new ones. This new system solved all previous issues with loss of connection and ultimately ran much smoother.</h3>
                            </div>
                            <div>
                                <img 
                                    src="./assets/code-host-join.png" 
                                    alt="Audience Sound Shenanigan"
                                    class="freak-pic"
                                >
                                <img 
                                    src="./assets/code-scene-load.png" 
                                    alt="Audience Sound Shenanigan"
                                    class="freak-pic"
                                >
                            </div>
                        </div>
                        <div class="freak-list">
                            <img 
                                src="./assets/code-scene-unload.png" 
                                alt="Audience Sound Shenanigan"
                                class="freak-pic"
                            >
                            <!-- <img 
                                src="./assets/code-scene-load.png" 
                                alt="Audience Sound Shenanigan"
                                class="freak-pic"
                            > -->
                        </div>
                        <div class="freak-list">
                            <div>
                                <img 
                                    src="./assets/code-minimap-mesh.png" 
                                    alt="Audience Sound Shenanigan"
                                    class="freak-pic"
                                >
                                <img 
                                    src="./assets/code-send-minimap.png" 
                                    alt="Audience Sound Shenanigan"
                                    class="freak-pic"
                                >
                            </div>
                            <div>
                                <p class="section__text__p2" align="center">
                                    THE MINIMAP
                                </p>
                                <h3 align="left"> &ensp; The minimap was my favorite feature to implement into Freakshow's audience system. It took a surprising amount of work behind the scenes as well. The reason is that Freakshow was developed to include randomly generated levels. These Levels would not be present or generated on the client side, as it would put an unnecessary load on the original web-based client.  </h3>
                                <h3 align="left"> &ensp; Now, we haven't ended up sticking with the web-based client, but it would still be bad practice to generate levels for a client who doesn't use them. So then, my solution comes in. Positioned in a birds-eye view on the host side, an orthographic camera renders its view to a RenderTexture. This camera only views a certain mesh I create.</h3>
                                <h3 align="left"> &ensp; After a level has been loaded, the SetMinimapMesh() function is called. What this does is gather all of the NavMeshSurface data in the scene, run through it, and generate a new mesh based on the given triangle data. This mesh, now rendered into a RenderTexture, is broken down to send to the client.</h3>
                                <h3 align="left"> &ensp; As it's not possible to send larger data structures through a remote procedure call, I have to break the RenderTexture down into bytes. I first convert it to a Texture2D, then use Unity's EncodeToPNG() function to break the texture down further.</h3>
                                <h3 align="left"> &ensp; Once those bytes are sent, the client rebuilds a new Texture2D based on that information. Then copy that Texture2D to a new RenderTexture before giving it to the minimapImage UI component. Maybe an overcomplicated solution, but it fits my purposes. I'm quite proud of it.</h3>
                            </div>
                        </div>
                        <div class="freak-list">
                            <!-- <img 
                                src="./assets/code-send-minimap.png" 
                                alt="Audience Sound Shenanigan"
                                class="freak-pic"
                            > -->
                            <img 
                                src="./assets/code-set-minimap.png" 
                                alt="Audience Sound Shenanigan"
                                class="freak-pic"
                            >
                        </div>
                        <div class="freak-list">
                            <div>
                                <p class="section__text__p2" align="center">
                                    SHENANIGANS
                                </p>
                                <h3 align="left"> &ensp; While the sound and light shenanigans were relatively simple in implementation, placing traps gave me quite a bit of trouble. </h3>
                                <h3 align="left"> &ensp; First, I had to have a functional minimap to even attempt this feature, and that was a hurdle in itself. Once I got that working, traps were next. The first task was converting the client's UI positional data to world space positional data on the server's side. To do this, I used Unity's OnPointerDown event function and determined if the pointer had clicked within the minimap's bounds. Then, I scaled that position from the minimap UI image to world space based off of the minimap's orthographic camera size.</h3>
                                <h3 align="left"> &ensp; This worked really well! Once I had the world position, I could send that through a ServerRPC and determine if a trap could be placed at the location. The server would run a check on the scene's NavMesh data, and if a point existed within a radius of the provided location, a trap would spawn!</h3>
                                <h3 align="left"> &ensp; After that, using the client data received by the ServerRPC, I could send a response back to that specific client about the outcome. I use a system similar to this when sending the contestant and monster locations to each client. This way, all clients view live map updates on the locations of the contestant and all monsters in the Freakshow!</h3>
                            </div>
                            <div>
                                <img 
                                    src="./assets/code-pointer-position.png" 
                                    alt="Audience Sound Shenanigan"
                                    class="freak-pic"
                                >
                                <img 
                                    src="./assets/code-trap-placement.png" 
                                    alt="Audience Sound Shenanigan"
                                    class="freak-pic"
                                >
                            </div>
                            
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section id="role">
        <div class="section__text">
            <h1 class="title" style="color:#c0fdfb;">WHAT I LEARNED</h1>
        </div>
        <div class="section-container">
            <div class="freak-details-container">
                <div class="freak-containers">
                    <div class="freak-container" style="margin-bottom: 2rem;">
                        <h1 class="title">THE ITERATIVE PROCESS</h1>
                        <h3 align="left"> &ensp; I quickly learned how much initial ideas change over the course of a project. Where we've landed now is far from the target we set at the start of development. This isn't a bad thing--we're very happy with the game we've created--but it wasn't without challenges. On my part, I came across plenty of game-breaking bugs, and learned a lot in working through them.</h3>
                        <h3 align="left"> &ensp; The most important thing was to find the fun, playtest plenty,  and figure out what worked well and what didn't. Through this testing, we were able to make necessary gameplay changes to the Audience System. The feedback we received was the reason I continued implementing live map features. Playtesters especially enjoyed the ability to mess with one another in real time. Seeing this reinforced the chaotic dynamic the team was looking for in the game.</h3>
                    </div>
                    <div class="freak-container">
                        <h1 class="title">TIME MANAGEMENT</h1>
                        <h3 align="left"> &ensp; Surprise, surprise--managing time is still something I'm figuring out, and likely will be for the rest of my life. In probably the busiest semester of my college career, I fought to keep myself on pace in this project without burning out. I did so by giving myself time blocks for this project throughout the week. I used these blocks to focus on researching solutions to problems or implementing new features and fixes.</h3>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section id="contact" style="height: fit-content;">
        <h1 class="title" style="color: #c0fdfb;">
            THANKS FOR READING!
        </h1>
        <p class="section__text__p1" align="center">
            I KNOW IT'S A LOT...
        </p>
        <div class="section__text">
            <br>
            <br>
            <p class="section__text__p2">
                KEEP AN EYE OUT FOR FUTURE UPDATES!
            </p>
        </div>
        <div class="contact-info-upper-container">
            <div class="contact-info-container">
                <img 
                    src="./assets/email.png" 
                    alt="Email icon"
                    class="icon contact-icon email-icon"
                >
                <p>
                    <a href="mailto:luc.walz@motorhoney.com">
                        LUC.WALZ@MOTORHONEY.COM
                    </a>
                </p>
            </div>
            <div class="contact-info-container">
                <img 
                    src="./assets/linkedin.png" 
                    alt="My LinkedIn profile"
                    class="icon contact-icon" 
                    onclick="window.open('https://www.linkedin.com/in/luc-walz-0594232ba/', '_blank');"
                >
                <img 
                    src="./assets/itch.png" 
                    alt="My Itch.io profile"
                    class="icon contact-icon" 
                    onclick="window.open('https://luc-walz.itch.io/', '_blank');"
                >
                <img 
                    src="./assets/github.png" 
                    alt="My GitHub profile"
                    class="icon contact-icon" 
                    onclick="window.open('https://github.com/PintsizeSquid', '_blank');"
                >
            </div>
        </div>
    </section>
    <footer>
        <nav>
            <div class="nav-links-container">
                <ul class="nav-links">
                    <!-- <li><a href="blog.html">BLOG</a></li> -->
                    <li><a href="index.html#profile">PROFILE</a></li>
                    <li><a href="index.html#projects">PROJECTS</a></li>
                    <li><a href="index.html#experience">EXPERIENCE</a></li>
                    <li><a href="index.html#about">ABOUT</a></li>
                    <li><a href="index.html#contact">CONTACT</a></li>
                </ul>
            </div>
        </nav>
        <p><br>COPYRIGHT &#169; 2024 LUC WALZ. ALL RIGHTS</p>
    </footer>
    <script src="script.js"></script>
</body>
</html>